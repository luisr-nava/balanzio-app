model Supplier {
  id          String   @id @default(uuid())
  name        String
  ownerId     String
  contactName String?
  phone       String?
  email       String?
  address     String?
  notes       String?
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())

  categoryId String?
  category   SupplierCategory? @relation(fields: [categoryId], references: [id])

  purchases    Purchase[]
  supplierShop SupplierShop[]
  purchaseReturns PurchaseReturn[]
  creditNotes  CreditNote[]
  merchandiseReplacements MerchandiseReplacement[]
}

model SupplierShop {
  id         String @id @default(uuid())
  supplierId String
  shopId     String

  supplier Supplier @relation(fields: [supplierId], references: [id])
  shop     Shop     @relation(fields: [shopId], references: [id])

  @@unique([supplierId, shopId])
}

model SupplierCategory {
  id      String @id @default(uuid())
  name    String
  ownerId String

  // Auditoría
  createdAt DateTime @default(now())
  createdBy String? // quién la creó

  updatedAt DateTime @updatedAt
  updatedBy String? // quién la modificó

  isActive   Boolean   @default(true)
  disabledAt DateTime?
  disabledBy String? // quién la deshabilitó

  suppliers Supplier[]

  @@unique([name, ownerId])
}
